// Copyright (c) 2023-present Lukas Neubert and contributors (see AUTHORS.md).
// This Source Code Form is subject to the terms of the Mozilla Public License 2.0.
package main

import os

const TOOLS := ['build-examples', 'build-tools', 'test-self']

const TOOLS_WITH_ARGS := create_tools_with_args()
fun create_tools_with_args() map[string][]string {
	mut tools := map[string][]string
	tools['check-md'] = ['docs/docs.md', 'README.md']
	return tools
}

fun main() {
	mut fails := 0
	for tool in TOOLS {
		cmd := 'node ${$BAITEXE} ${tool}'
		code := os.system(cmd)
		if code != 0 {
			fails += 1
		}
	}
	for tool, args in TOOLS_WITH_ARGS {
		for arg_string in args {
			cmd := 'node ${$BAITEXE} ${tool} ${arg_string}'
			code := os.system(cmd)
			if code != 0 {
				fails += 1
			}
		}
	}
	if fails > 0 {
		exit(1)
	}
}
