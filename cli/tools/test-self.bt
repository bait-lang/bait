// Copyright (c) 2023-present Lukas Neubert and contributors (see AUTHORS.md).
// This Source Code Form is subject to the terms of the Mozilla Public License 2.0.
package main

import os

fun main() {
	test_files := os.walk_ext('lib', '_test.bt')
	mut has_fails := false
	for file in test_files {
		res := os.exec('node ${$BAITEXE} test ${file}')
		if res.code == 0 {
			println('OK ${file}')
		} else {
			has_fails = true
			println('FAIL ${file}')
			println(res.stderr)
		}
	}
	if has_fails {
		exit(1)
	}
}
