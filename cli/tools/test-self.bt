// SPDX-FileCopyrightText: 2023-present Lukas Neubert <lukas.neubert@proton.me>
// SPDX-License-Identifier: MPL-2.0
package main

import os

fun main() {
	mut test_files := os.walk_ext('tests', '.bt').filter(fun (f string) bool {
		return f.contains('_test.') and not f.contains('.in.')
	}) as []string
	mut fails := 0

	for file in test_files {
		fails += os.system('node ${$BAITEXE} test ${file}')
	}

	if fails > 0 {
		exit(1)
	}
}
